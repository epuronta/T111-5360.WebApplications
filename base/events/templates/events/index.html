<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Events App</title>
    <link rel="stylesheet" href="{{ STATIC_URL }}/events/style.css" type="text/css" />
</head>
<body>
</body>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script>
$(document).ready(function() {
    $("body").append(
	$("<div />", {"id": "loadingIndicator"}).text("Loading")
    );

    $.ajax({
	url: "/api/events/?limit=10",
	type: "GET",
	dataType: "json",
	success: function(data) {
	    if(!data.events) {
		console.log("Error, no events in data", data)
		return;
	    }

	    for(index in data.events) {
		event = data.events[index];
		var container = $("<div />", {"class": "event"});

		for(prop in event) {
		    container.append(
			$("<span />")
			    .addClass(prop)
			    .addClass("property")
			    .text(event[prop])
		    );
		}

		$("body").append(container);
	    }

	}, error: function(jqXHR, textStatus, errorThrown) {
	    console.log(jqXHR, textStatus, errorThrown);
	}
    });
});

</script>
</html>